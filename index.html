<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Minesweeper Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background: #1a1a1a;
        color: white;
        margin: 0;
        padding: 0;
    }
    h1 {
        margin: 20px 0;
        color: #ffcc00;
    }
    #controls {
        margin-bottom: 15px;
    }
    button {
        padding: 8px 15px;
        margin: 5px;
        border: none;
        border-radius: 5px;
        background: #333;
        color: white;
        font-size: 16px;
        cursor: pointer;
        transition: background 0.3s;
    }
    button:hover {
        background: #ffcc00;
        color: black;
    }
    #board {
        display: grid;
        margin: 0 auto;
        background: #555;
        border: 2px solid #888;
        box-shadow: 0 0 10px black;
    }
    .cell {
        width: 30px;
        height: 30px;
        background: #999;
        border: 1px solid #777;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
    }
    .cell.revealed {
        background: #ccc;
        cursor: default;
        transform: scale(0.95);
    }
    .cell.mine {
        background: red;
    }
    .cell.flag {
        background: #ffcc00;
        color: black;
    }
    #score {
        font-size: 18px;
        margin: 10px;
        color: lightgreen;
    }
</style>
</head>
<body>

<h1>ðŸ’£ Minesweeper</h1>
<div id="controls">
    <button onclick="startGame(8, 10)">Easy</button>
    <button onclick="startGame(12, 20)">Normal</button>
    <button onclick="startGame(16, 40)">Hard</button>
</div>
<div id="score">Score: 0</div>
<div id="board"></div>

<script>
    let board = [];
    let rows, cols, mineCount;
    let score = 0;
    let gameOver = false;

    function startGame(size, mines) {
        rows = size;
        cols = size;
        mineCount = mines;
        score = 0;
        gameOver = false;
        document.getElementById("score").innerText = "Score: " + score;

        board = [];
        const boardDiv = document.getElementById("board");
        boardDiv.innerHTML = "";
        boardDiv.style.gridTemplateRows = `repeat(${rows}, 30px)`;
        boardDiv.style.gridTemplateColumns = `repeat(${cols}, 30px)`;

        for (let r = 0; r < rows; r++) {
            let row = [];
            for (let c = 0; c < cols; c++) {
                let cell = {
                    r, c,
                    mine: false,
                    revealed: false,
                    flagged: false,
                    element: document.createElement("div")
                };
                cell.element.classList.add("cell");
                cell.element.addEventListener("click", () => revealCell(cell));
                cell.element.addEventListener("contextmenu", e => {
                    e.preventDefault();
                    toggleFlag(cell);
                });
                boardDiv.appendChild(cell.element);
                row.push(cell);
            }
            board.push(row);
        }
        placeMines();
    }

    function placeMines() {
        let placed = 0;
        while (placed < mineCount) {
            let r = Math.floor(Math.random() * rows);
            let c = Math.floor(Math.random() * cols);
            if (!board[r][c].mine) {
                board[r][c].mine = true;
                placed++;
            }
        }
    }

    function revealCell(cell) {
        if (gameOver || cell.revealed || cell.flagged) return;
        cell.revealed = true;
        cell.element.classList.add("revealed");

        if (cell.mine) {
            cell.element.classList.add("mine");
            endGame(false);
            return;
        }

        score++;
        document.getElementById("score").innerText = "Score: " + score;

        let minesAround = countMines(cell.r, cell.c);
        if (minesAround > 0) {
            cell.element.textContent = minesAround;
        } else {
            getNeighbors(cell.r, cell.c).forEach(n => revealCell(n));
        }

        checkWin();
    }

    function toggleFlag(cell) {
        if (gameOver || cell.revealed) return;
        cell.flagged = !cell.flagged;
        cell.element.classList.toggle("flag", cell.flagged);
        cell.element.textContent = cell.flagged ? "ðŸš©" : "";
    }

    function countMines(r, c) {
        return getNeighbors(r, c).filter(n => n.mine).length;
    }

    function getNeighbors(r, c) {
        let neighbors = [];
        for (let dr = -1; dr <= 1; dr++) {
            for (let dc = -1; dc <= 1; dc++) {
                if (dr === 0 && dc === 0) continue;
                let nr = r + dr, nc = c + dc;
                if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) {
                    neighbors.push(board[nr][nc]);
                }
            }
        }
        return neighbors;
    }

    function endGame(win) {
        gameOver = true;
        if (!win) {
            board.flat().forEach(cell => {
                if (cell.mine) {
                    cell.element.classList.add("mine");
                    cell.element.textContent = "ðŸ’£";
                }
            });
            alert("ðŸ’¥ Game Over!");
        } else {
            alert("ðŸŽ‰ You Win! Final Score: " + score);
        }
    }

    function checkWin() {
        let revealedCount = board.flat().filter(c => c.revealed).length;
        if (revealedCount === rows * cols - mineCount) {
            endGame(true);
        }
    }

    // Start with Easy mode
    startGame(8, 10);
</script>

</body>
</html>
